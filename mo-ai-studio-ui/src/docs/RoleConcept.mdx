# 智能体(Role)概念文档与自定义智能体教程

## 1. 智能体概述

智能体(Role)是一个迷你 AI 应用程序，它封装了特定的功能和行为。每个智能体都有自己的特定设置，包括约束条件、指令、变量、输出处理器等，使其能够执行特定的任务或模拟特定的行为模式。

## 2. 智能体的组成部分

### 2.1 基本信息

- 名称(name): 智能体的唯一标识符
- 约束(constraint): 定义智能体的行为边界和限制
- 指令(instruction): 智能体的主要行为指南

### 2.2 变量(Variables)

变量允许用户为智能体提供动态输入。每个变量都有:

- 名称(name)
- 设置器(setter): 定义如何输入和处理变量值

### 2.3 自定义指令(Custom Instructions)

允许为智能体添加额外的指令集，每个自定义指令包含:

- 前缀(prefix)
- 指令内容(instruction)

### 2.4 输出处理器(Output Processor)

定义如何处理和展示智能体的输出结果。

### 2.5 基础模型(Base Model)

指定智能体使用的 AI 模型。

### 2.6 温度(Temperature)

控制 AI 生成结果的创造性和随机性。

## 3. 设置器(Setters)

设置器用于定义如何输入和处理变量值。主要类型包括:

### 3.1 文本设置器(Text Setter)

文本设置器使用 NextUI 的 Input 组件，允许用户输入简单的文本值。

### 3.2 文件设置器(File Setter)

文件设置器使用自定义的 FileSelector 组件，允许用户选择一个或多个文件。它会读取选定文件的内容，并将其格式化为包含文件路径和内容的字符串。

### 3.3 目录设置器(Directory Setter)

目录设置器使用自定义的 DirectorySelector 组件，允许用户选择一个目录。它会递归读取选定目录的结构，并将其格式化为树状结构的字符串。

### 3.4 URL 设置器(URL Setter)

URL 设置器使用自定义的 URLInput 组件，允许用户输入 URL 并获取其内容。它提供了一个输入框和一个"获取"按钮，点击按钮后会获取 URL 的内容并显示。

### 3.5 日期设置器(Date Setter)

日期设置器使用自定义的 DateSetter 组件，允许用户选择日期和时区。它会自动更新当前时间，并根据选择的时区格式化日期和时间。

## 4. 输出处理器(Output Processors)

输出处理器定义了如何处理智能体的输出。主要类型包括:

### 4.1 默认输出处理器

默认输出处理器不对输出进行任何处理，直接返回原始输出。

### 4.2 Exa 搜索处理器

Exa 搜索处理器会解析输出中的特定格式（//exaSearchBegin 和 //exaSearchEnd 之间的代码），并执行其中的 Exa 搜索函数。搜索结果会被格式化为 JSON 字符串返回。

### 4.3 文件输出处理器

文件输出处理器会解析输出中的特定格式（<file path="...">...</file>），并将内容写入指定的文件路径。它会返回一个包含每个文件写入状态的结果数组。

### 4.4 函数处理器

函数处理器会解析输出中的特定格式（<function deps="...">...</function>），并执行其中的 JavaScript 函数。它可以使用预定义的依赖项（如 exa、localDB、chatByRoleName 等），并返回函数的执行结果。

## 5. 自定义智能体教程

本教程将指导您如何创建一个自定义智能体，涵盖所有相关概念。我们将创建一个名为"代码审查助手"的智能体，用于帮助开发者进行代码审查。

### 步骤 1: 打开智能体编辑界面

1. 在应用程序中，找到并点击"添加新智能体"或"创建智能体"按钮。
2. 这将打开智能体编辑界面，您将在这里设置智能体的各个组成部分。

### 步骤 2: 设置基本信息

1. 智能体名称: 输入"代码审查助手"。
2. 约束: 在约束文本区域输入以下内容：

```

你是一位经验丰富的高级软件工程师，专注于代码质量和最佳实践。你的任务是审查代码，提供建设性的反馈，并建议改进。请保持专业、客观，并以帮助开发者提高代码质量为目标。

```

3. 指令: 在指令文本区域输入以下内容：

```

1.  仔细阅读提供的代码。
2.  评估代码的结构、可读性和效率。
3.  识别潜在的错误、安全漏洞或性能问题。
4.  提供具体的改进建议，包括代码示例。
5.  指出代码中的优秀部分，给予积极反馈。
6.  使用 markdown 格式化你的回复，以提高可读性。
7.  如果需要更多上下文或信息，请提出问题。

```

### 步骤 3: 添加自定义变量

1. 点击"添加变量"按钮。
2. 为第一个变量设置：

- 名称: codeToReview
- 设置器: 选择"文本设置器"

3. 再次点击"添加变量"按钮。
4. 为第二个变量设置：

- 名称: programmingLanguage
- 设置器: 选择"文本设置器"

### 步骤 4: 添加自定义指令

1. 点击"添加自定义指令"按钮。
2. 在新出现的卡片中：

- 指令前缀: 输入 "/explain"
- 指令内容: 输入 "详细解释你提到的某个概念或最佳实践，提供示例和使用场景。"

### 步骤 5: 选择输出处理器

从下拉菜单中选择"默认输出处理器"。对于代码审查助手，我们不需要特殊的输出处理。

### 步骤 6: 选择基础模型

从可用的模型列表中选择最适合代码审查任务的模型。

### 步骤 7: 设置温度

1. 使用滑块将温度设置为 0.7。这个设置可以在保持一定创造性的同时，确保输出的一致性和相关性。
2. 您也可以从快速设置下拉菜单中选择"数据提取"预设，它会自动将温度设置为 0.7。

### 步骤 8: 保存智能体

检查所有设置是否正确，然后点击"保存"按钮来创建您的自定义智能体。

### 使用自定义智能体

现在您已经创建了"代码审查助手"智能体，您可以通过以下方式使用它：

1. 在聊天界面中选择"代码审查助手"智能体。
2. 在 codeToReview 变量中粘贴需要审查的代码。
3. 在 programmingLanguage 变量中指定编程语言。
4. 发送消息，等待 AI 助手的代码审查反馈。
5. 如果需要进一步解释，可以使用"/explain"命令，后跟您想了解的概念或最佳实践。

例如：

```

用户: [粘贴代码到 codeToReview 变量]
用户: 编程语言：Python
AI: [提供代码审查反馈]
用户: /explain 代码复杂度
AI: [解释代码复杂度概念，提供示例和使用场景]

```

通过这个自定义智能体，您可以获得专业的代码审查建议，提高代码质量，并深入了解各种编程概念和最佳实践。

## 6. 最佳实践

在创建和使用自定义智能体时，请遵循以下最佳实践：

1. 明确定义智能体的目标和范围。
2. 使用清晰、具体的约束和指令。
3. 合理使用变量来增加智能体的灵活性。
4. 选择合适的输出处理器以获得所需的输出格式。
5. 根据任务需求调整温度设置。
6. 定期审查和优化智能体设置。
7. 利用自定义指令扩展智能体的功能。
8. 选择最适合任务的基础模型。
9. 在使用过程中收集反馈，不断改进智能体设置。

通过遵循这些最佳实践，您可以创建出更加高效和有用的自定义智能体，充分发挥 AI 助手的潜力，提高工作效率和质量。
